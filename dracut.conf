# dracut.conf - Dracut configuration for reproducible builds

# Include only what we need
omit_dracutmodules+=" dash plymouth "
add_dracutmodules+=" paypal-auth-vm network crypt "

# Compression
compress="xz"
compresslevel="9"

# Reproducibility settings
export SOURCE_DATE_EPOCH="1640995200"  # Fixed timestamp
export TZ="UTC"

# Host-only mode disabled for reproducibility
hostonly="no"
hostonly_cmdline="no"

# Install kernel modules
kernel_cmdline=""
add_drivers+=" virtio_pci virtio_blk dm_crypt "

# Firmware
firmware_dirs="/lib/firmware"

# No local system configuration
no_host_only_commandline="yes"

# Do not require kernel modules
no_kernel="yes"